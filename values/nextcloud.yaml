nextcloud:
  defaultConfigs:
    redis.config.php: false

  configs:
    redis.config.php: |-
      <?php
      $CONFIG = array (
        'memcache.distributed' => '\OC\Memcache\Redis',
        'memcache.locking' => '\OC\Memcache\Redis',
        'redis' => array(
          'host' => 'redis-master.database.svc.cluster.local',
          'port' => 6379,
        ),
      );


persistence:
  enabled: true
  size: 50Gi
  storageClass: longhorn

# Database section – use external Postgres
# NOTE: exact values depend on the chart you’re using; adjust keys if needed.
externalDatabase:
  enabled: true
  type: postgresql
  host: postgresql.database.svc.cluster.local
  port: 5432
  database: appdb
  user: appuser
  password: apppassword

# Disable any internal/embedded database if the chart exposes that knob
# For some Nextcloud charts, you might need to explicitly disable mariadb/postgresql subcharts.
mariadb:
  enabled: false
postgresql:
  enabled: false